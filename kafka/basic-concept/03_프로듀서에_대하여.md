

![Apache kafka 개요](https://i.pinimg.com/originals/6a/46/51/6a46514d46e0edd07ab4e80c828d60a8.png)

# apache Kafka 

## 프로듀서에 대하여

프로듀서는 다음과 같은 역할을 한다.

- 토픽에 해당하는 메시지 생성
- 특정 토픽으로 데이터 퍼블리시
- 처리 실패/재시도



### 실습

다음 시간에~



### 데이터 전송

![image-20211007195842948](/Users/addpage/Library/Application Support/typora-user-images/image-20211007195842948.png)

프로듀서가 데이터를 `click_log`라는 이름의 토픽에 `login`이라는 데이터를 전송하면 위와 같이 쌓이게 된다.



![image-20211007195906511](/Users/addpage/Library/Application Support/typora-user-images/image-20211007195906511.png)

만약 파티션을 늘리면 다음과 같이 두개의 파티션에 라운드로빈으로 차곡차곡 쌓이게 된다.



![image-20211007200105933](/Users/addpage/Library/Application Support/typora-user-images/image-20211007200105933.png)

`send` 메서드의 두번째 인자에 키를 넣게되면 어떻게 될까? 카프카는 키를 특별한 해시로 변형시켜 파티션과 1대1 매칭을 시킨다. 

> ⚠️ 키와 파티션의 개수가 다른 경우
>
> 키와 파티션의 일관성이 보장되지 않는다. 이를 주의하여 파티션을 생성하고 추후에 생성하지 않는 것을 추천한다고 한다.ㅣ



바이트 시리얼라이즈 - grpc 내부 프로토버프, 쓰리프트?, keep alive, http2~3?

